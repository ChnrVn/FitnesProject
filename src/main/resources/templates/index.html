<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org" xmlns = "http://www.w3.org/1999/html" lang = "ru">
<head>
  <meta charset = "UTF-8">
  <link rel = "stylesheet" type = "text/css" href = "../static/css/index.css"/>
  <link href="https://db.onlinewebfonts.com/c/38764ac6ef7cce3558484bb7e60b9af3?family=Bebas+Neue+Cyrillic" rel="stylesheet">
  <link href="https://db.onlinewebfonts.com/c/4c6ae0b5133c55f46cc12ae0f2d43941?family=Bebas+Neue+Regular" rel="stylesheet">
  <link href="https://db.onlinewebfonts.com/c/63105376024a2fbc44ff039a073cb853?family=Museo+Sans+Cyrl+W03+300" rel="stylesheet">
  <title>Главная страница</title>
</head>
<body>
<div>
  <blockquote><h1>Информационно-справочная система фитнес-клуба</h1></blockquote>
  
  <div class = "search">
      <form th:action = "@{/}">
        <input type = "text" name = "keyword" id = "keyword" size = "60" th:value = "${search_string}" required placeholder="Поиск абонемента..."/>
        <button type = "submit" class = "find"></button>
      </form>
  </div>
  
  <div class="area"></div><nav class="main-menu">
    <img src="https://www.svgrepo.com/show/532195/menu.svg"/>
    <ul>
        <li>
            <a href="/new">
                <i class="fa"></i>
                <span class="nav-text">
                        Добавить запись
                </span>
            </a>
          
        </li>
        <li>
            <a href="@{'/edit/'+${membership_to_edit.id}}">
                <i class="fa"></i>
                <span class="nav-text">
                    Редактировать запись
                </span>
            </a>
            
        </li>
        <li>
            <a href="/logout">
                <i class="fa"></i>
                <span class="nav-text">
                    Выход
                </span>
            </a>
        </li>
    </ul>
</nav>

</div>
  <table id="1">
    <thead>
    <tr>
      <th scope="col" onclick="sortTable(0)" style="cursor: pointer">
        ID
      </th>
      <th scope="col" onclick="sortTable(1)" style="cursor: pointer">
        ФИО
      </th>
      <th scope="col" onclick="sortTable(2)" style="cursor: pointer">
        Номер телефона
      </th>
      <th scope="col" onclick="sortTable(3)" style="cursor: pointer">
        Почта
      </th>
      <th scope="col" onclick="sortTable(4)" style="cursor: pointer">
        Дата приобретения абонемента
      </th>
      <th scope="col" onclick="sortTable(5)" style="cursor: pointer">
        Количество оставшихся занятий
      </th>
      <th scope="col" onclick="sortTable(6)" style="cursor: pointer">
          Тариф
      </th>
      <th scope="col" onclick="sortTable(7)" style="cursor: pointer">
        Стоимость абонемента
      </th>
      <th scope="col" onclick="sortTable(8)" style="cursor: pointer">
        Внесенная сумма
      </th>
      <th scope="col" onclick="sortTable(9)" style="cursor: pointer">
        Действия
      </th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="membership: ${membership_list}">
      <td scope="row" th:text="${membership.getId()}">Отстутствует</td>
      <td scope="row" th:text="${membership.getName()}">Отстутствует</td>
      <td scope="row" th:text="${membership.getPhone()}">Отстутствует</td>
      <td scope="row" th:text="${membership.getMail()}">Отстутствует</td>
      <td scope="row" th:text="${membership.getAbonimentBoughtDate()}">Отстутствует
      </td>
      <td scope="row" th:text="${membership.getTrainsLeft()}">Отстутствует</td>
      <td scope="row" th:text="${membership.getOption()}">Отсутствует</td>
      <td scope="row" th:text="${membership.getCost()}">Отсутствует</td>
      <td scope="row" th:text="${membership.getPayedSum()}">Отсутствует</td>
      <td>
        <a th:href="@{'/delete/'+${membership.getId()}}">
          <button type="button" class="btn">Удалить</button>
        </a>
      </td>
    </tr>
    </tbody>
  </table>
  <div class = "counter">
    <p>
      <script type="text/javascript">
        function getRowsColumn() {
          let table = document.getElementById('1')
          let tBody = table.querySelector('tbody')
          const count = tBody.querySelectorAll('tr').length;
          document.write('Количество абонементов всего: ' + count)
        }

        getRowsColumn()
      </script>
    </p>
  </div>

<script type="text/javascript">
  function clearSearch() {
    window.location = "[[@{/}]]";
  }
</script>


<script>
  function sortTable(n) {
    let table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById("1");
    switching = true;
    dir = "asc";
    while (switching) {
      switching = false;
      rows = table.rows;
      for (i = 1; i < (rows.length - 1); i++) {
        shouldSwitch = false;
        x = rows[i].getElementsByTagName("th")[n];
        y = rows[i + 1].getElementsByTagName("th")[n];
        if (dir == "asc") {
          if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        } else if (dir == "desc") {
          if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        }
      }
      if (shouldSwitch) {
        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
        switching = true;
        switchcount++;
      } else {
        if (switchcount == 0 && dir == "asc") {
          dir = "desc";
          switching = true;
        }
      }
    }
  }
</script>
<script src="/static/js/gg.js" type="text/javascript"></script>
</body>
</html>